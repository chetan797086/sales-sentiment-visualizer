<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IBY Sales Communication Analyzer</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f4f6f9;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    header {
      text-align: center;
      margin-bottom: 20px;
    }
    .dashboard {
      max-width: 1000px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    h1 {
      margin: 0;
      color: #222;
    }
    .section {
      margin: 20px 0;
    }
    .messages {
      border: 1px solid #ddd;
      padding: 15px;
      border-radius: 8px;
      background: #fafafa;
      min-height: 100px;
      font-size: 14px;
      line-height: 1.5;
    }
    textarea {
      width: 100%;
      height: 80px;
      padding: 10px;
      margin-top: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
    }
    .btn {
      padding: 10px 20px;
      border: none;
      background: #007bff;
      color: #fff;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
    }
    .btn:hover {
      background: #0056b3;
    }
    .score-box {
      display: inline-block;
      background: #eef;
      padding: 20px;
      border-radius: 8px;
      font-size: 22px;
      font-weight: bold;
      margin-right: 20px;
    }
    .chart {
      display: flex;
      justify-content: space-around;
      margin-top: 15px;
    }
    .bar {
      width: 80px;
      border-radius: 6px;
      color: #fff;
      text-align: center;
      padding: 5px 0;
      transition: height 0.5s;
    }
    #positive { background: #28a745; }
    #neutral { background: #6c757d; }
    #negative { background: #dc3545; }
    .risk-alert {
      margin-top: 15px;
      padding: 10px;
      border-radius: 6px;
      display: none;
      font-weight: bold;
    }
    .low-risk { background: #d4edda; color: #155724; }
    .high-risk { background: #f8d7da; color: #721c24; }
  </style>
</head>
<body>

  <header>
    <h1>IBY Sales Communication Analyzer</h1>
    <p>Track client sentiment and psychological safety in sales communication</p>
  </header>

  <div class="dashboard">
    <div class="section">
      <h3>Client Messages</h3>
      <div class="messages" id="messages">
        "Thank you for the quick response, I’m happy with the service." <br>
        "The product was okay, but delivery was delayed." <br>
        "I’m really upset with how my issue was handled." <br>
      </div>
      <textarea id="newMessage" placeholder="Type new client message..."></textarea>
      <button class="btn" onclick="addMessage()">Add Message</button>
    </div>

    <div class="section">
      <button class="btn" onclick="analyzeMessages()">Analyze Communication</button>
    </div>

    <div class="section">
      <h3>Insights</h3>
      <div class="score-box" id="score">Score: --</div>
      <div class="risk-alert" id="risk"></div>
    </div>

    <div class="section">
      <h3>Mood Distribution</h3>
      <div class="chart">
        <div class="bar" id="positive" style="height:40px;">0%</div>
        <div class="bar" id="neutral" style="height:40px;">0%</div>
        <div class="bar" id="negative" style="height:40px;">0%</div>
      </div>
    </div>
  </div>

<script>
function addMessage(){
  let input = document.getElementById("newMessage");
  if(input.value.trim() !== ""){
    document.getElementById("messages").innerHTML += input.value + "<br>";
    input.value = "";
  }
}

function analyzeMessages(){
  let text = document.getElementById("messages").innerText.toLowerCase();
  let positives = (text.match(/happy|great|good|thank/g) || []).length;
  let negatives = (text.match(/bad|upset|angry|delayed|issue/g) || []).length;
  let total = positives + negatives;

  let posPercent = total ? Math.round((positives/total)*100) : 0;
  let negPercent = total ? Math.round((negatives/total)*100) : 0;
  let neuPercent = 100 - (posPercent + negPercent);

  document.getElementById("positive").style.height = posPercent*2 + "px";
  document.getElementById("positive").innerText = posPercent+"%";

  document.getElementById("neutral").style.height = neuPercent*2 + "px";
  document.getElementById("neutral").innerText = neuPercent+"%";

  document.getElementById("negative").style.height = negPercent*2 + "px";
  document.getElementById("negative").innerText = negPercent+"%";

  let score = 70 + posPercent - negPercent;
  if(score > 100) score = 100;
  if(score < 0) score = 0;

  document.getElementById("score").innerText = "Score: " + score + "/100";

  let riskBox = document.getElementById("risk");
  if(score < 50){
    riskBox.style.display = "block";
    riskBox.className = "risk-alert high-risk";
    riskBox.innerText = "⚠ High Risk: Negative communication detected!";
  } else {
    riskBox.style.display = "block";
    riskBox.className = "risk-alert low-risk";
    riskBox.innerText = "✅ Low Risk: Communication is healthy.";
  }
}
</script>

</body>
</html>
